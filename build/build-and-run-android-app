#!/bin/sh

# How to run:
# ./build-and-run-android-app /path/to/android-sdk 

export PATH="$PATH:$1/tools:$1/platform-tools"

cd ../mobile/android && cordova/emulate && \
  echo "--------------------------------------------------------------" && \
  echo "Wait until emulator is done booting. Then press ENTER." && \
  echo "If you are using a real device then press ENTER now." && \
  read && \
  echo "--------------------------------------------------------------" && \
  adb uninstall ee.positium.reportcollector && \
  cordova/debug && \
  echo "--------------------------------------------------------------" && \
  echo "Open the emulator window now and unlock the screen." && \
  echo "If you are using a real device then turn it on and unlock it." && \
  echo "The app will run automatically in a few seconds." && \
  sleep 5 && \
  adb shell am start -a android.intent.action.MAIN -n ee.positium.reportcollector/.ReportCollector
